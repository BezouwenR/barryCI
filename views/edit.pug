include ./head.pug

// https://getbootstrap.com/docs/3.3/css/#grid-example-basic

.container

  .row
    .col-md-1
    .col-md-10
      if id === undefined
        h2 Creating build.
      else
        h2='Editing ' + repo.name + '.'
      
      .mb-4

      form(method='post')
        if use_id !== undefined
          .form-row
            .form-group
              label Build ID
              input.form-control(type='text', name='id', placeholder='Build ID', readonly, required, value=use_id)
              small.form-text.text-mutedThis ID will be used in the URLs for this build.
        else
          input(type='text', name='id', value=id, hidden)

        .form-row
          .form-group
            label Build name
            input.form-control(type='text', name='name', value=repo.name, placeholder='Build name', required)

        .form-row
          .form-group
            label GitHub Auth Key
            input.form-control(type='password', name='auth', value=repo.github, placeholder='')
            small.form-text.text-mutedThis To be used if you want build status results posted back to GitHub (in real time).

        .form-row
          .form-group
            label Secret
            input.form-control(type='password', name='secret', value=repo.secret, placeholder='')
            small.form-text.text-mutedThis Recommended so no one else can trigger unwanted builds.
        
        hr
        
        .form-row
          .form-group
            label Repo HTTPS clone URL
            input.form-control(type='text', name='clone_url', value=repo.clone_url, placeholder='https://')
            small.form-text.text-mutedThis Paste a link to the HTTPS clone URL to be able to trigger builds from barryCI.

        hr

        .form-row
          .form-group
            .btn-group(role='group')
              a(href='/app/manage', type='button', class='btn btn-default') Cancel
              input(type='submit', class='btn btn-primary', value='Save')
              if id !== undefined
                a(href='/app/delete/' + id, type='button', class='btn btn-danger') Delete

      if id !== undefined
        hr

        h3 Webhook URL
        p This is the URL used for the (push and release only) webhook.
        pre=pushurl

    .col-md-1