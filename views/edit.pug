include ./head.pug

// https://getbootstrap.com/docs/3.3/css/#grid-example-basic

.container

  .row
    .col-md-1
    .col-md-10
      if id === undefined
        h2 Creating build.
      else
        h2='Editing ' + repo.name + '.'
      
      .mb-4

      form(method='post')
        if id === undefined
          .form-row
            .form-group
              label Build ID
              input.form-control(type='text', name='id', placeholder='Build ID', required)
              small.form-text.text-mutedThis ID will be used in the URLs for this build.
        else
          input(type='text', name='id', value=id, hidden)

        .form-row
          .form-group
            label Build name
            input.form-control(type='text', name='name', value=repo.name, placeholder='Build name', required)

        .form-row
          .form-group
            label GitHub Auth Key
            input.form-control(type='password', name='auth', value=repo.name, placeholder='')
            small.form-text.text-mutedThis To be used if you want build status results posted back to GitHub (in real time).

        .form-row
          .form-group
            label Secret
            input.form-control(type='password', name='secret', value=repo.name, placeholder='')
            small.form-text.text-mutedThis Recommended so no one else can trigger unwanted builds.

        hr
        .form-row
          .form-group
            .btn-group(role='group')
              a(href='/app/list', type='button', class='btn btn-default') Cancel
              input(type='submit', class='btn btn-primary', value='Save')
              if id !== undefined
                a(href='/app/delete/' + id, type='button', class='btn btn-danger') Delete

      if id !== undefined
        hr
        h3 Build push URL
        p This is the URL used for the (push only) webhook.
        pre=pushurl

      each message in flash
        h4(style="color: red;") #{message}

    .col-md-1